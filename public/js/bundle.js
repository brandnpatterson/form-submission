!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,n){"use strict";e.exports={data:[{placeholder:"Name",regex:"[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$",error:"Please enter letters only"},{placeholder:"Email",regex:"^[a-zA-Z0-9]+@[a-zA-Z0-9-]+(?:.[a-zA-Z0-9-]+)*$",error:"Please enter a valid email"},{placeholder:"Phone",regex:"^[2-9]{2}[0-9]{8}$",error:"Please enter a 10 digit phone number"},{placeholder:"Address",regex:"^(?!s*$).+",error:"Please enter your address"}]}},function(e,t,n){"use strict";var a=e.exports={data:[],init:function(){this.cacheDOM(),this.handleCall()},cacheDOM:function(){this.catData=document.getElementById("cat-data"),this.dogData=document.getElementById("dog-data"),this.getDataButton=document.querySelector(".get-data")},handleCall:function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);a.data=e,console.log(e)}},e.open("GET","https://form-component-api.herokuapp.com/api/v1/submissions",!0),e.send()},render:function(){var e=this.data,t=this.catData,n=this.dogData;0!==e.length&&(e.map(function(e){var a=document.createElement("li"),r=document.createElement("li");a.innerHTML="\n          "+e.name+" answered "+e.cat+"!",r.innerHTML="\n          "+e.name+" answered "+e.dog+"!",t.appendChild(a),n.appendChild(r)}),this.getDataButton.style.display="none")}};a.init()},function(e,t,n){"use strict";var a=n(3),r=function(e){return e&&e.__esModule?e:{default:e}}(a);(e.exports={data:{},init:function(){this.cacheDOM()},cacheDOM:function(){this.name=document.getElementById("name"),this.email=document.getElementById("email"),this.phone=document.getElementById("phone"),this.address=document.getElementById("address"),this.yesCat=document.getElementById("yes-cat"),this.yesDog=document.getElementById("yes-dog")},send:function(){if(!1===r.default.errors){console.log(r.default.errors),this.handleData();var e=this.data,t=new XMLHttpRequest;t.open("POST","https://form-component-api.herokuapp.com/api/v1/submissions",!0),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.send(JSON.stringify(e))}},handleData:function(){this.data={name:this.name.value,email:this.email.value,phone:this.phone.value,address:this.address.value,cat:"no",dog:"no"},this.yesCat.checked&&(this.data.cat="yes"),this.yesDog.checked&&(this.data.dog="yes")}}).init()},function(e,t,n){"use strict";var a=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(a),i=e.exports={errors:null,validate:function(e){e.map(function(e,t){var n=e.nextSibling,a=n.nextSibling;e.value.match(r.default.data[t].regex)?(a.textContent="âœ…",a.classList.remove("input-fail"),a.classList.add("input-success"),e.dataset.error="false"):""===e.value?event.preventDefault():(a.textContent=r.default.data[t].error,a.classList.remove("input-success"),a.classList.add("input-fail"),e.dataset.error="true"),0!=i.errors&&event.preventDefault()},this);var t=function(e){return"false"===e.dataset.error};e.every(t)?i.errors=!1:i.errors=!0}}},function(e,t,n){"use strict";n(5),n(1),n(2)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=n(6),i=n(7),o=n(3),s=n(1),d=a(s),u=n(2),c=a(u);({init:function(){this.cacheDOM(),this.bindEvents(),(0,r.init)(this.required)},cacheDOM:function(){this.form=document.querySelector(".form"),this.getData=document.querySelector(".get-data"),this.postData=document.querySelector(".post-data");var e=document.querySelector("#name"),t=document.querySelector("#email"),n=document.querySelector("#phone"),a=document.querySelector("#address");this.required=[e,t,n,a]},bindEvents:function(){(0,i.testForElement)(this.postData,"click",this.sendData.bind(this)),(0,i.testForElement)(this.getData,"click",this.handleRender.bind(this)),(0,i.testForElement)(this.form,"mouseover",this.liveValidation.bind(this)),(0,i.testForElement)(this.form,"mouseover",this.placeholdersToggle.bind(this))},handleRender:function(){d.default.render()},sendData:function(){c.default.send()},liveValidation:function(e){"radio"!==e.target.type&&(0,o.validate)(this.required)},placeholdersToggle:function(e){(0,r.toggle)(this.required)}}).init()},function(e,t,n){"use strict";var a=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(a);e.exports={init:function(e){e.map(function(e,t){e&&(e.placeholder=r.default.data[t].placeholder)},this)},toggle:function(e){e.map(function(e,t){event.target!=e?e.placeholder=r.default.data[t].placeholder:e.placeholder=""},this)}}},function(e,t,n){"use strict";e.exports={testForElement:function(e,t,n){e&&e.addEventListener(t,n)}}},function(e,t,n){e.exports=n(4)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA3YTYyODI5NjA3OWI5NmE2MWE0ZSIsIndlYnBhY2s6Ly8vLi9qcy9kYXRhL2Zvcm0tZGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9qcy9oYW5kbGVycy9yZXF1ZXN0R0VULmpzIiwid2VicGFjazovLy8uL2pzL2hhbmRsZXJzL3JlcXVlc3RQT1NULmpzIiwid2VicGFjazovLy8uL2pzL2hhbmRsZXJzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vanMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vanMvZm9ybUNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9qcy9oYW5kbGVycy9wbGFjZWhvbGRlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vanMvaGFuZGxlcnMvdGVzdEZvckVsZW1lbnQuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJjYWxsIiwibSIsImMiLCJ2YWx1ZSIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZGF0YSIsInBsYWNlaG9sZGVyIiwicmVnZXgiLCJlcnJvciIsImhhbmRsZUdFVCIsImluaXQiLCJ0aGlzIiwiY2FjaGVET00iLCJoYW5kbGVDYWxsIiwiY2F0RGF0YSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJkb2dEYXRhIiwiZ2V0RGF0YUJ1dHRvbiIsInF1ZXJ5U2VsZWN0b3IiLCJyZXF1ZXN0IiwiWE1MSHR0cFJlcXVlc3QiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwib2JqIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwiY29uc29sZSIsImxvZyIsIm9wZW4iLCJzZW5kIiwicmVuZGVyIiwibGVuZ3RoIiwibWFwIiwiY2F0SXRlbSIsImNyZWF0ZUVsZW1lbnQiLCJkb2dJdGVtIiwiaW5uZXJIVE1MIiwiY2F0IiwiZG9nIiwiYXBwZW5kQ2hpbGQiLCJzdHlsZSIsImRpc3BsYXkiLCJfdmFsaWRhdGlvbiIsIl92YWxpZGF0aW9uMiIsImRlZmF1bHQiLCJlbWFpbCIsInBob25lIiwiYWRkcmVzcyIsInllc0NhdCIsInllc0RvZyIsImVycm9ycyIsImhhbmRsZURhdGEiLCJzZXRSZXF1ZXN0SGVhZGVyIiwic3RyaW5naWZ5IiwiY2hlY2tlZCIsIl9mb3JtRGF0YSIsIl9mb3JtRGF0YTIiLCJ2YWxpZGF0aW9uIiwidmFsaWRhdGUiLCJyZXF1aXJlZCIsImlucHV0IiwiaW5kZXgiLCJhZnRlciIsIm5leHRTaWJsaW5nIiwiZXJyb3JNZXNzYWdlIiwibWF0Y2giLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsImRhdGFzZXQiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwidGVzdERhdGEiLCJldmVyeSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfcGxhY2Vob2xkZXJzIiwiX3Rlc3RGb3JFbGVtZW50IiwiX3JlcXVlc3RHRVQiLCJfcmVxdWVzdEdFVDIiLCJfcmVxdWVzdFBPU1QiLCJfcmVxdWVzdFBPU1QyIiwiYmluZEV2ZW50cyIsImZvcm0iLCJnZXREYXRhIiwicG9zdERhdGEiLCJ0ZXN0Rm9yRWxlbWVudCIsInNlbmREYXRhIiwiYmluZCIsImhhbmRsZVJlbmRlciIsImxpdmVWYWxpZGF0aW9uIiwicGxhY2Vob2xkZXJzVG9nZ2xlIiwiZSIsInRhcmdldCIsInR5cGUiLCJ0b2dnbGUiLCJlbCIsImV2ZW50VHlwZSIsIm1ldGhvZCIsImFkZEV2ZW50TGlzdGVuZXIiXSwibWFwcGlu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aFhuQjdFLEdBQU9ELFNBRTFCOEIsS0FGb0MsU0FFOUJvRCxHQUNKQSxFQUFTM0IsSUFBSSxTQUFDNEIsRUFBT0MsR0FDZkQsSUFDRkEsRUFBTXpELFlBQWNxRCxFQUFBWixRQUFTMUMsS0FBSzJELEdBQU8xRCxjQUUxQ0ssT0FFTHVGLE9BVG9DLFNBUzVCcEMsR0FDTkEsRUFBUzNCLElBQUksU0FBQzRCLEVBQU9DLEdBQ2ZVLE1BQU1zQixRQUFVakMsRUFDbEJBLEVBQU16RCxZQUFjcUQsRUFBQVosUUFBUzFDLEtBQUsyRCxHQUFPMUQsWUFHekN5RCxFQUFNekQsWUFBYyxJQUVyQkssU1I0WEQsU0FBVTlCLEVBQVFELEVBQVNILEdBRWpDLFlTalphSSxHQUFPRCxTQUNsQjZHLGVBRDRCLFNBQ1pVLEVBQUlDLEVBQVdDLEdBQ3pCRixHQUNGQSxFQUFHRyxpQkFBaUJGLEVBQVdDLE1UK1ovQixTQUFVeEgsRUFBUUQsRUFBU0gsR0FFakNJLEVBQU9ELFFBQVVILEVBQW9CIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBpZGVudGl0eSBmdW5jdGlvbiBmb3IgY2FsbGluZyBoYXJtb255IGltcG9ydHMgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0XG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uaSA9IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbi8qKioqKiovIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuLyoqKioqKi8gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuLyoqKioqKi8gXHRcdFx0XHRnZXQ6IGdldHRlclxuLyoqKioqKi8gXHRcdFx0fSk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4vKioqKioqLyBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4vKioqKioqLyBcdFx0cmV0dXJuIGdldHRlcjtcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDgpO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG4vKlxuICBGb3JtIGRhdGFcbiovXG5cbnZhciBmb3JtRGF0YSA9IG1vZHVsZS5leHBvcnRzID0ge1xuICBkYXRhOiBbe1xuICAgIHBsYWNlaG9sZGVyOiAnTmFtZScsXG4gICAgcmVnZXg6ICdbYS16QS1aXSsoKFtcXCcsLiAtXVthLXpBLVogXSk/W2EtekEtWl0qKSokJyxcbiAgICBlcnJvcjogJ1BsZWFzZSBlbnRlciBsZXR0ZXJzIG9ubHknXG4gIH0sIHtcbiAgICBwbGFjZWhvbGRlcjogJ0VtYWlsJyxcbiAgICByZWdleDogJ15bYS16QS1aMC05XStAW2EtekEtWjAtOS1dKyg/OlxcLlthLXpBLVowLTktXSspKiQnLFxuICAgIGVycm9yOiAnUGxlYXNlIGVudGVyIGEgdmFsaWQgZW1haWwnXG4gIH0sIHtcbiAgICBwbGFjZWhvbGRlcjogJ1Bob25lJyxcbiAgICByZWdleDogJ15bMi05XXsyfVswLTldezh9JCcsXG4gICAgZXJyb3I6ICdQbGVhc2UgZW50ZXIgYSAxMCBkaWdpdCBwaG9uZSBudW1iZXInXG4gIH0sIHtcbiAgICBwbGFjZWhvbGRlcjogJ0FkZHJlc3MnLFxuICAgIHJlZ2V4OiAnXig/IVxccyokKS4rJyxcbiAgICBlcnJvcjogJ1BsZWFzZSBlbnRlciB5b3VyIGFkZHJlc3MnXG4gIH1dXG59O1xuXG4vKioqLyB9KSxcbi8qIDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuLypcbiAgUmVxdWVzdCBkYXRhIGZyb20gQVBJXG4qL1xuXG52YXIgZGV2VVJMID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvdjEvc3VibWlzc2lvbnMnO1xudmFyIHByb2RVUkwgPSAnaHR0cHM6Ly9mb3JtLWNvbXBvbmVudC1hcGkuaGVyb2t1YXBwLmNvbS9hcGkvdjEvc3VibWlzc2lvbnMnO1xuXG52YXIgY3VycmVudFVSTCA9IHByb2RVUkw7XG5cbnZhciBoYW5kbGVHRVQgPSBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgZGF0YTogW10sXG4gIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdGhpcy5jYWNoZURPTSgpO1xuICAgIHRoaXMuaGFuZGxlQ2FsbCgpO1xuICB9LFxuICBjYWNoZURPTTogZnVuY3Rpb24gY2FjaGVET00oKSB7XG4gICAgdGhpcy5jYXREYXRhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdC1kYXRhJyk7XG4gICAgdGhpcy5kb2dEYXRhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RvZy1kYXRhJyk7XG4gICAgdGhpcy5nZXREYXRhQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdldC1kYXRhJyk7XG4gIH0sXG4gIGhhbmRsZUNhbGw6IGZ1bmN0aW9uIGhhbmRsZUNhbGwoKSB7XG4gICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB2YXIgbWV0aG9kID0gJ0dFVCc7XG4gICAgdmFyIHVybCA9IGN1cnJlbnRVUkw7XG5cbiAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT0gNCAmJiB0aGlzLnN0YXR1cyA9PSAyMDApIHtcbiAgICAgICAgdmFyIG9iaiA9IEpTT04ucGFyc2UodGhpcy5yZXNwb25zZVRleHQpO1xuICAgICAgICAvLyBhc3NpZ24gcmVxdWVzdCBkYXRhIHRvIGxvY2FsIGFycmF5XG4gICAgICAgIGhhbmRsZUdFVC5kYXRhID0gb2JqO1xuICAgICAgICBjb25zb2xlLmxvZyhvYmopO1xuICAgICAgfVxuICAgIH07XG4gICAgcmVxdWVzdC5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcbiAgICByZXF1ZXN0LnNlbmQoKTtcbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgdmFyIGNhdERhdGEgPSB0aGlzLmNhdERhdGE7XG4gICAgdmFyIGRvZ0RhdGEgPSB0aGlzLmRvZ0RhdGE7XG5cbiAgICBpZiAoZGF0YS5sZW5ndGggIT09IDApIHtcbiAgICAgIGRhdGEubWFwKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgIHZhciBjYXRJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgdmFyIGRvZ0l0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuXG4gICAgICAgIGNhdEl0ZW0uaW5uZXJIVE1MID0gJ1xcbiAgICAgICAgICAnICsgZC5uYW1lICsgJyBhbnN3ZXJlZCAnICsgZC5jYXQgKyAnISc7XG5cbiAgICAgICAgZG9nSXRlbS5pbm5lckhUTUwgPSAnXFxuICAgICAgICAgICcgKyBkLm5hbWUgKyAnIGFuc3dlcmVkICcgKyBkLmRvZyArICchJztcblxuICAgICAgICBjYXREYXRhLmFwcGVuZENoaWxkKGNhdEl0ZW0pO1xuICAgICAgICBkb2dEYXRhLmFwcGVuZENoaWxkKGRvZ0l0ZW0pO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuZ2V0RGF0YUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cbiAgfVxufTtcbmhhbmRsZUdFVC5pbml0KCk7XG5cbi8qKiovIH0pLFxuLyogMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3ZhbGlkYXRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG52YXIgX3ZhbGlkYXRpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGlvbik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBkZXZVUkwgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS92MS9zdWJtaXNzaW9ucyc7IC8qXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlcXVlc3QgZGF0YSBmcm9tIEFQSVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cblxudmFyIHByb2RVUkwgPSAnaHR0cHM6Ly9mb3JtLWNvbXBvbmVudC1hcGkuaGVyb2t1YXBwLmNvbS9hcGkvdjEvc3VibWlzc2lvbnMnO1xuXG52YXIgY3VycmVudFVSTCA9IHByb2RVUkw7XG5cbnZhciBoYW5kbGVQT1NUID0gbW9kdWxlLmV4cG9ydHMgPSB7XG4gIGRhdGE6IHt9LFxuICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgIHRoaXMuY2FjaGVET00oKTtcbiAgfSxcbiAgY2FjaGVET006IGZ1bmN0aW9uIGNhY2hlRE9NKCkge1xuICAgIHRoaXMubmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYW1lJyk7XG4gICAgdGhpcy5lbWFpbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFpbCcpO1xuICAgIHRoaXMucGhvbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGhvbmUnKTtcbiAgICB0aGlzLmFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkcmVzcycpO1xuICAgIHRoaXMueWVzQ2F0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3llcy1jYXQnKTtcbiAgICB0aGlzLnllc0RvZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd5ZXMtZG9nJyk7XG4gIH0sXG4gIHNlbmQ6IGZ1bmN0aW9uIHNlbmQoKSB7XG4gICAgaWYgKF92YWxpZGF0aW9uMi5kZWZhdWx0LmVycm9ycyA9PT0gZmFsc2UpIHtcbiAgICAgIGNvbnNvbGUubG9nKF92YWxpZGF0aW9uMi5kZWZhdWx0LmVycm9ycyk7XG4gICAgICB0aGlzLmhhbmRsZURhdGEoKTtcbiAgICAgIC8vIHVzZSBsb2NhbCBvYmplY3QgdG8gc3RvcmUgcmVxdWVzdCBkYXRhXG4gICAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcblxuICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgIHZhciBtZXRob2QgPSAnUE9TVCc7XG4gICAgICB2YXIgdXJsID0gY3VycmVudFVSTDtcblxuICAgICAgcmVxdWVzdC5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcbiAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9VVRGLTgnKTtcbiAgICAgIHJlcXVlc3Quc2VuZChKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgfVxuICB9LFxuICBoYW5kbGVEYXRhOiBmdW5jdGlvbiBoYW5kbGVEYXRhKCkge1xuICAgIHRoaXMuZGF0YSA9IHtcbiAgICAgIG5hbWU6IHRoaXMubmFtZS52YWx1ZSxcbiAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLnZhbHVlLFxuICAgICAgcGhvbmU6IHRoaXMucGhvbmUudmFsdWUsXG4gICAgICBhZGRyZXNzOiB0aGlzLmFkZHJlc3MudmFsdWUsXG4gICAgICBjYXQ6ICdubycsXG4gICAgICBkb2c6ICdubydcbiAgICB9O1xuICAgIGlmICh0aGlzLnllc0NhdC5jaGVja2VkKSB7XG4gICAgICB0aGlzLmRhdGEuY2F0ID0gJ3llcyc7XG4gICAgfVxuICAgIGlmICh0aGlzLnllc0RvZy5jaGVja2VkKSB7XG4gICAgICB0aGlzLmRhdGEuZG9nID0gJ3llcyc7XG4gICAgfVxuICB9XG59O1xuaGFuZGxlUE9TVC5pbml0KCk7XG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX2Zvcm1EYXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9mb3JtRGF0YTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mb3JtRGF0YSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciB2YWxpZGF0aW9uID0gbW9kdWxlLmV4cG9ydHMgPSB7XG4gIGVycm9yczogbnVsbCxcbiAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKHJlcXVpcmVkKSB7XG4gICAgcmVxdWlyZWQubWFwKGZ1bmN0aW9uIChpbnB1dCwgaW5kZXgpIHtcbiAgICAgIHZhciBhZnRlciA9IGlucHV0Lm5leHRTaWJsaW5nO1xuICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IGFmdGVyLm5leHRTaWJsaW5nO1xuXG4gICAgICBpZiAoaW5wdXQudmFsdWUubWF0Y2goX2Zvcm1EYXRhMi5kZWZhdWx0LmRhdGFbaW5kZXhdLnJlZ2V4KSkge1xuICAgICAgICBlcnJvck1lc3NhZ2UudGV4dENvbnRlbnQgPSAn4pyFJztcbiAgICAgICAgZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ2lucHV0LWZhaWwnKTtcbiAgICAgICAgZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ2lucHV0LXN1Y2Nlc3MnKTtcbiAgICAgICAgaW5wdXQuZGF0YXNldC5lcnJvciA9ICdmYWxzZSc7XG4gICAgICB9IGVsc2UgaWYgKGlucHV0LnZhbHVlID09PSAnJykge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gX2Zvcm1EYXRhMi5kZWZhdWx0LmRhdGFbaW5kZXhdLmVycm9yO1xuICAgICAgICBlcnJvck1lc3NhZ2UuY2xhc3NMaXN0LnJlbW92ZSgnaW5wdXQtc3VjY2VzcycpO1xuICAgICAgICBlcnJvck1lc3NhZ2UuY2xhc3NMaXN0LmFkZCgnaW5wdXQtZmFpbCcpO1xuICAgICAgICBpbnB1dC5kYXRhc2V0LmVycm9yID0gJ3RydWUnO1xuICAgICAgfVxuXG4gICAgICBpZiAodmFsaWRhdGlvbi5lcnJvcnMgIT0gZmFsc2UpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICB9LCB0aGlzKTtcblxuICAgIHZhciB0ZXN0RGF0YSA9IGZ1bmN0aW9uIHRlc3REYXRhKGlucHV0KSB7XG4gICAgICByZXR1cm4gaW5wdXQuZGF0YXNldC5lcnJvciA9PT0gJ2ZhbHNlJztcbiAgICB9O1xuXG4gICAgcmVxdWlyZWQuZXZlcnkodGVzdERhdGEpID8gdmFsaWRhdGlvbi5lcnJvcnMgPSBmYWxzZSA6IHZhbGlkYXRpb24uZXJyb3JzID0gdHJ1ZTtcbiAgfVxufTsgLypcbiAgICAgZm9ybURhdGEgdXNlZCB0byBtYXRjaCB1c2VyIGlucHV0IGZvciB2YWxpZGF0aW9uXG4gICAqL1xuXG4vKioqLyB9KSxcbi8qIDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfcGxhY2Vob2xkZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblxudmFyIF90ZXN0Rm9yRWxlbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cbnZhciBfdmFsaWRhdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbnZhciBfcmVxdWVzdEdFVCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfcmVxdWVzdEdFVDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZXF1ZXN0R0VUKTtcblxudmFyIF9yZXF1ZXN0UE9TVCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfcmVxdWVzdFBPU1QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVxdWVzdFBPU1QpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgZm9ybUNvbXBvbmVudCA9IHtcbiAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB0aGlzLmNhY2hlRE9NKCk7XG4gICAgdGhpcy5iaW5kRXZlbnRzKCk7XG4gICAgKDAsIF9wbGFjZWhvbGRlcnMuaW5pdCkodGhpcy5yZXF1aXJlZCk7XG4gIH0sXG4gIGNhY2hlRE9NOiBmdW5jdGlvbiBjYWNoZURPTSgpIHtcbiAgICB0aGlzLmZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xuICAgIHRoaXMuZ2V0RGF0YSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nZXQtZGF0YScpO1xuICAgIHRoaXMucG9zdERhdGEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9zdC1kYXRhJyk7XG4gICAgdmFyIG5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmFtZScpO1xuICAgIHZhciBlbWFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlbWFpbCcpO1xuICAgIHZhciBwaG9uZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwaG9uZScpO1xuICAgIHZhciBhZGRyZXNzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZHJlc3MnKTtcbiAgICB0aGlzLnJlcXVpcmVkID0gW25hbWUsIGVtYWlsLCBwaG9uZSwgYWRkcmVzc107XG4gIH0sXG4gIGJpbmRFdmVudHM6IGZ1bmN0aW9uIGJpbmRFdmVudHMoKSB7XG4gICAgLy8gdGVzdEZvckVsZW1lbnQgZm91bmQgaW4gaGFuZGxlcnMgZm9sZGVyXG4gICAgKDAsIF90ZXN0Rm9yRWxlbWVudC50ZXN0Rm9yRWxlbWVudCkodGhpcy5wb3N0RGF0YSwgJ2NsaWNrJywgdGhpcy5zZW5kRGF0YS5iaW5kKHRoaXMpKTtcbiAgICAoMCwgX3Rlc3RGb3JFbGVtZW50LnRlc3RGb3JFbGVtZW50KSh0aGlzLmdldERhdGEsICdjbGljaycsIHRoaXMuaGFuZGxlUmVuZGVyLmJpbmQodGhpcykpO1xuICAgICgwLCBfdGVzdEZvckVsZW1lbnQudGVzdEZvckVsZW1lbnQpKHRoaXMuZm9ybSwgJ21vdXNlb3ZlcicsIHRoaXMubGl2ZVZhbGlkYXRpb24uYmluZCh0aGlzKSk7XG4gICAgKDAsIF90ZXN0Rm9yRWxlbWVudC50ZXN0Rm9yRWxlbWVudCkodGhpcy5mb3JtLCAnbW91c2VvdmVyJywgdGhpcy5wbGFjZWhvbGRlcnNUb2dnbGUuYmluZCh0aGlzKSk7XG4gIH0sXG4gIGhhbmRsZVJlbmRlcjogZnVuY3Rpb24gaGFuZGxlUmVuZGVyKCkge1xuICAgIF9yZXF1ZXN0R0VUMi5kZWZhdWx0LnJlbmRlcigpO1xuICB9LFxuICBzZW5kRGF0YTogZnVuY3Rpb24gc2VuZERhdGEoKSB7XG4gICAgX3JlcXVlc3RQT1NUMi5kZWZhdWx0LnNlbmQoKTtcbiAgfSxcbiAgbGl2ZVZhbGlkYXRpb246IGZ1bmN0aW9uIGxpdmVWYWxpZGF0aW9uKGUpIHtcbiAgICBpZiAoZS50YXJnZXQudHlwZSA9PT0gJ3JhZGlvJykge1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSB7XG4gICAgICAoMCwgX3ZhbGlkYXRpb24udmFsaWRhdGUpKHRoaXMucmVxdWlyZWQpO1xuICAgIH1cbiAgfSxcbiAgcGxhY2Vob2xkZXJzVG9nZ2xlOiBmdW5jdGlvbiBwbGFjZWhvbGRlcnNUb2dnbGUoZSkge1xuICAgICgwLCBfcGxhY2Vob2xkZXJzLnRvZ2dsZSkodGhpcy5yZXF1aXJlZCk7XG4gIH1cbn07IC8qXG4gICAgIGZvcm0gY29tcG9uZW50XG4gICAqL1xuXG5mb3JtQ29tcG9uZW50LmluaXQoKTtcblxuLyoqKi8gfSksXG4vKiA2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfZm9ybURhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX2Zvcm1EYXRhMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Zvcm1EYXRhKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIHBsYWNlaG9sZGVycyA9IG1vZHVsZS5leHBvcnRzID0ge1xuICAvLyBzZXQgaW5pdGlhbCBpbnB1dCBwbGFjZWhvbGRlciB2YWx1ZXNcbiAgaW5pdDogZnVuY3Rpb24gaW5pdChyZXF1aXJlZCkge1xuICAgIHJlcXVpcmVkLm1hcChmdW5jdGlvbiAoaW5wdXQsIGluZGV4KSB7XG4gICAgICBpZiAoaW5wdXQpIHtcbiAgICAgICAgaW5wdXQucGxhY2Vob2xkZXIgPSBfZm9ybURhdGEyLmRlZmF1bHQuZGF0YVtpbmRleF0ucGxhY2Vob2xkZXI7XG4gICAgICB9XG4gICAgfSwgdGhpcyk7XG4gIH0sXG4gIHRvZ2dsZTogZnVuY3Rpb24gdG9nZ2xlKHJlcXVpcmVkKSB7XG4gICAgcmVxdWlyZWQubWFwKGZ1bmN0aW9uIChpbnB1dCwgaW5kZXgpIHtcbiAgICAgIGlmIChldmVudC50YXJnZXQgIT0gaW5wdXQpIHtcbiAgICAgICAgaW5wdXQucGxhY2Vob2xkZXIgPSBfZm9ybURhdGEyLmRlZmF1bHQuZGF0YVtpbmRleF0ucGxhY2Vob2xkZXI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyB0b2dnbGUgaW5wdXQgcGxhY2Vob2xkZXIgdmFsdWUgdG8gYmxhbmsgb25seSB3aGVuIHVzZXIgc2VsZWN0cyBpbnB1dFxuICAgICAgICBpbnB1dC5wbGFjZWhvbGRlciA9ICcnO1xuICAgICAgfVxuICAgIH0sIHRoaXMpO1xuICB9XG59OyAvKlxuICAgICBTZXQgaW5pdGlhbCBwbGFjZWhvbGRlcnMgZm9yIGlucHV0c1xuICAgKi9cblxuLyoqKi8gfSksXG4vKiA3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbi8qXG4gIENyZWF0ZWQgdG8gYXZvaWQgZXJyb3JzIGlmIHRoZSBlbGVtZW50IGlzIG5vdCBwcmVzZW50IGluIHRoZSBET01cbiovXG5cbnZhciB0ZXN0ID0gbW9kdWxlLmV4cG9ydHMgPSB7XG4gIHRlc3RGb3JFbGVtZW50OiBmdW5jdGlvbiB0ZXN0Rm9yRWxlbWVudChlbCwgZXZlbnRUeXBlLCBtZXRob2QpIHtcbiAgICBpZiAoZWwpIHtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBtZXRob2QpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqKi8gfSksXG4vKiA4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGJ1bmRsZS5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGlkZW50aXR5IGZ1bmN0aW9uIGZvciBjYWxsaW5nIGhhcm1vbnkgaW1wb3J0cyB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHRcbiBcdF9fd2VicGFja19yZXF1aXJlX18uaSA9IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZTsgfTtcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gOCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgN2E2MjgyOTYwNzliOTZhNjFhNGUiLCIvKlxuICBGb3JtIGRhdGFcbiovXG5cbnZhciBmb3JtRGF0YSA9IG1vZHVsZS5leHBvcnRzID0ge1xuICBkYXRhOiBbXG4gICAge1xuICAgICAgcGxhY2Vob2xkZXI6ICdOYW1lJyxcbiAgICAgIHJlZ2V4OiAnW2EtekEtWl0rKChbXFwnLC4gLV1bYS16QS1aIF0pP1thLXpBLVpdKikqJCcsXG4gICAgICBlcnJvcjogJ1BsZWFzZSBlbnRlciBsZXR0ZXJzIG9ubHknXG4gICAgfSxcbiAgICB7XG4gICAgICBwbGFjZWhvbGRlcjogJ0VtYWlsJyxcbiAgICAgIHJlZ2V4OiAnXlthLXpBLVowLTldK0BbYS16QS1aMC05LV0rKD86XFwuW2EtekEtWjAtOS1dKykqJCcsXG4gICAgICBlcnJvcjogJ1BsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsJ1xuICAgIH0sXG4gICAge1xuICAgICAgcGxhY2Vob2xkZXI6ICdQaG9uZScsXG4gICAgICByZWdleDogJ15bMi05XXsyfVswLTldezh9JCcsXG4gICAgICBlcnJvcjogJ1BsZWFzZSBlbnRlciBhIDEwIGRpZ2l0IHBob25lIG51bWJlcidcbiAgICB9LFxuICAgIHtcbiAgICAgIHBsYWNlaG9sZGVyOiAnQWRkcmVzcycsXG4gICAgICByZWdleDogJ14oPyFcXHMqJCkuKycsXG4gICAgICBlcnJvcjogJ1BsZWFzZSBlbnRlciB5b3VyIGFkZHJlc3MnXG4gICAgfVxuICBdXG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9kYXRhL2Zvcm0tZGF0YS5qcyIsIi8qXG4gIFJlcXVlc3QgZGF0YSBmcm9tIEFQSVxuKi9cblxuY29uc3QgZGV2VVJMID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvdjEvc3VibWlzc2lvbnMnO1xuY29uc3QgcHJvZFVSTCA9ICdodHRwczovL2Zvcm0tY29tcG9uZW50LWFwaS5oZXJva3VhcHAuY29tL2FwaS92MS9zdWJtaXNzaW9ucyc7XG5cbmNvbnN0IGN1cnJlbnRVUkwgPSBwcm9kVVJMO1xuXG5jb25zdCBoYW5kbGVHRVQgPSBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgZGF0YTogW10sXG4gIGluaXQgKCkge1xuICAgIHRoaXMuY2FjaGVET00oKTtcbiAgICB0aGlzLmhhbmRsZUNhbGwoKTtcbiAgfSxcbiAgY2FjaGVET00gKCkge1xuICAgIHRoaXMuY2F0RGF0YSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXQtZGF0YScpO1xuICAgIHRoaXMuZG9nRGF0YSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb2ctZGF0YScpO1xuICAgIHRoaXMuZ2V0RGF0YUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nZXQtZGF0YScpO1xuICB9LFxuICBoYW5kbGVDYWxsICgpIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgY29uc3QgbWV0aG9kID0gJ0dFVCc7XG4gICAgY29uc3QgdXJsID0gY3VycmVudFVSTDtcblxuICAgIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PSA0ICYmIHRoaXMuc3RhdHVzID09IDIwMCkge1xuICAgICAgICBjb25zdCBvYmogPSBKU09OLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgLy8gYXNzaWduIHJlcXVlc3QgZGF0YSB0byBsb2NhbCBhcnJheVxuICAgICAgICBoYW5kbGVHRVQuZGF0YSA9IG9iajtcbiAgICAgICAgY29uc29sZS5sb2cob2JqKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmVxdWVzdC5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcbiAgICByZXF1ZXN0LnNlbmQoKTtcbiAgfSxcbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGNvbnN0IGNhdERhdGEgPSB0aGlzLmNhdERhdGE7XG4gICAgY29uc3QgZG9nRGF0YSA9IHRoaXMuZG9nRGF0YTtcblxuICAgIGlmIChkYXRhLmxlbmd0aCAhPT0gMCkge1xuICAgICAgZGF0YS5tYXAoZCA9PiB7XG4gICAgICAgIGNvbnN0IGNhdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICBjb25zdCBkb2dJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcblxuICAgICAgICBjYXRJdGVtLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAke2QubmFtZX0gYW5zd2VyZWQgJHtkLmNhdH0hYDtcblxuICAgICAgICBkb2dJdGVtLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAke2QubmFtZX0gYW5zd2VyZWQgJHtkLmRvZ30hYDtcblxuICAgICAgICBjYXREYXRhLmFwcGVuZENoaWxkKGNhdEl0ZW0pO1xuICAgICAgICBkb2dEYXRhLmFwcGVuZENoaWxkKGRvZ0l0ZW0pO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuZ2V0RGF0YUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cbiAgfVxufVxuaGFuZGxlR0VULmluaXQoKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2hhbmRsZXJzL3JlcXVlc3RHRVQuanMiLCIvKlxuICBSZXF1ZXN0IGRhdGEgZnJvbSBBUElcbiovXG5cbmltcG9ydCB2YWxpZGF0aW9uIGZyb20gJy4vdmFsaWRhdGlvbic7XG5cbmNvbnN0IGRldlVSTCA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3YxL3N1Ym1pc3Npb25zJztcbmNvbnN0IHByb2RVUkwgPSAnaHR0cHM6Ly9mb3JtLWNvbXBvbmVudC1hcGkuaGVyb2t1YXBwLmNvbS9hcGkvdjEvc3VibWlzc2lvbnMnO1xuXG5jb25zdCBjdXJyZW50VVJMID0gcHJvZFVSTDtcblxuY29uc3QgaGFuZGxlUE9TVCA9IG1vZHVsZS5leHBvcnRzID0ge1xuICBkYXRhOiB7fSxcbiAgaW5pdCAoKSB7XG4gICAgdGhpcy5jYWNoZURPTSgpO1xuICB9LFxuICBjYWNoZURPTSAoKSB7XG4gICAgdGhpcy5uYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hbWUnKTtcbiAgICB0aGlzLmVtYWlsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtYWlsJyk7XG4gICAgdGhpcy5waG9uZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwaG9uZScpO1xuICAgIHRoaXMuYWRkcmVzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRyZXNzJyk7XG4gICAgdGhpcy55ZXNDYXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgneWVzLWNhdCcpO1xuICAgIHRoaXMueWVzRG9nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3llcy1kb2cnKTtcbiAgfSxcbiAgc2VuZCAoKSB7XG4gICAgaWYgKHZhbGlkYXRpb24uZXJyb3JzID09PSBmYWxzZSkge1xuICAgICAgY29uc29sZS5sb2codmFsaWRhdGlvbi5lcnJvcnMpO1xuICAgICAgdGhpcy5oYW5kbGVEYXRhKCk7XG4gICAgICAvLyB1c2UgbG9jYWwgb2JqZWN0IHRvIHN0b3JlIHJlcXVlc3QgZGF0YVxuICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgY29uc3QgbWV0aG9kID0gJ1BPU1QnO1xuICAgICAgY29uc3QgdXJsID0gY3VycmVudFVSTDtcblxuICAgICAgcmVxdWVzdC5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcbiAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9VVRGLTgnKTtcbiAgICAgIHJlcXVlc3Quc2VuZChKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgfVxuICB9LFxuICBoYW5kbGVEYXRhICgpIHtcbiAgICB0aGlzLmRhdGEgPSB7XG4gICAgICBuYW1lOiB0aGlzLm5hbWUudmFsdWUsXG4gICAgICBlbWFpbDogdGhpcy5lbWFpbC52YWx1ZSxcbiAgICAgIHBob25lOiB0aGlzLnBob25lLnZhbHVlLFxuICAgICAgYWRkcmVzczogdGhpcy5hZGRyZXNzLnZhbHVlLFxuICAgICAgY2F0OiAnbm8nLFxuICAgICAgZG9nOiAnbm8nXG4gICAgfVxuICAgIGlmICh0aGlzLnllc0NhdC5jaGVja2VkKSB7XG4gICAgICB0aGlzLmRhdGEuY2F0ID0gJ3llcyc7XG4gICAgfVxuICAgIGlmICh0aGlzLnllc0RvZy5jaGVja2VkKSB7XG4gICAgICB0aGlzLmRhdGEuZG9nID0gJ3llcyc7XG4gICAgfVxuICB9XG59XG5oYW5kbGVQT1NULmluaXQoKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2hhbmRsZXJzL3JlcXVlc3RQT1NULmpzIiwiLypcbiAgZm9ybURhdGEgdXNlZCB0byBtYXRjaCB1c2VyIGlucHV0IGZvciB2YWxpZGF0aW9uXG4qL1xuXG5pbXBvcnQgZm9ybURhdGEgZnJvbSAnLi4vZGF0YS9mb3JtLWRhdGEnO1xuXG5jb25zdCB2YWxpZGF0aW9uID0gbW9kdWxlLmV4cG9ydHMgPSB7XG4gIGVycm9yczogbnVsbCxcbiAgdmFsaWRhdGUgKHJlcXVpcmVkKSB7XG4gICAgcmVxdWlyZWQubWFwICgoaW5wdXQsIGluZGV4KSA9PiB7XG4gICAgICB2YXIgYWZ0ZXIgPSBpbnB1dC5uZXh0U2libGluZztcbiAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBhZnRlci5uZXh0U2libGluZztcblxuICAgICAgaWYgKGlucHV0LnZhbHVlLm1hdGNoKGZvcm1EYXRhLmRhdGFbaW5kZXhdLnJlZ2V4KSkge1xuICAgICAgICBlcnJvck1lc3NhZ2UudGV4dENvbnRlbnQgPSAn4pyFJztcbiAgICAgICAgZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ2lucHV0LWZhaWwnKTtcbiAgICAgICAgZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ2lucHV0LXN1Y2Nlc3MnKTtcbiAgICAgICAgaW5wdXQuZGF0YXNldC5lcnJvciA9ICdmYWxzZSc7XG4gICAgICB9IGVsc2UgaWYgKGlucHV0LnZhbHVlID09PSAnJykge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gZm9ybURhdGEuZGF0YVtpbmRleF0uZXJyb3I7XG4gICAgICAgIGVycm9yTWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKCdpbnB1dC1zdWNjZXNzJyk7XG4gICAgICAgIGVycm9yTWVzc2FnZS5jbGFzc0xpc3QuYWRkKCdpbnB1dC1mYWlsJyk7XG4gICAgICAgIGlucHV0LmRhdGFzZXQuZXJyb3IgPSAndHJ1ZSc7XG4gICAgICB9XG5cbiAgICAgIGlmICh2YWxpZGF0aW9uLmVycm9ycyAhPSBmYWxzZSkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgIH0sIHRoaXMpO1xuXG4gICAgY29uc3QgdGVzdERhdGEgPSAoaW5wdXQpID0+IHtcbiAgICAgIHJldHVybiBpbnB1dC5kYXRhc2V0LmVycm9yID09PSAnZmFsc2UnO1xuICAgIH1cblxuICAgIHJlcXVpcmVkLmV2ZXJ5KHRlc3REYXRhKSA/IHZhbGlkYXRpb24uZXJyb3JzID0gZmFsc2UgOiB2YWxpZGF0aW9uLmVycm9ycyA9IHRydWU7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2hhbmRsZXJzL3ZhbGlkYXRpb24uanMiLCIvKlxuICBXZWJwYWNrIGVudHJ5IHBvaW50XG4qL1xuXG5pbXBvcnQgJy4vZm9ybUNvbXBvbmVudCc7XG5pbXBvcnQgJy4vaGFuZGxlcnMvcmVxdWVzdEdFVCc7XG5pbXBvcnQgJy4vaGFuZGxlcnMvcmVxdWVzdFBPU1QnO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvaW5kZXguanMiLCIvKlxuICBmb3JtIGNvbXBvbmVudFxuKi9cblxuaW1wb3J0IHsgaW5pdCwgdG9nZ2xlIH0gZnJvbSAnLi9oYW5kbGVycy9wbGFjZWhvbGRlcnMnO1xuaW1wb3J0IHsgdGVzdEZvckVsZW1lbnQgfSBmcm9tICcuL2hhbmRsZXJzL3Rlc3RGb3JFbGVtZW50JztcbmltcG9ydCB7IHZhbGlkYXRlIH0gZnJvbSAnLi9oYW5kbGVycy92YWxpZGF0aW9uJztcbmltcG9ydCBoYW5kbGVHRVQgZnJvbSAnLi9oYW5kbGVycy9yZXF1ZXN0R0VUJztcbmltcG9ydCBoYW5kbGVQT1NUIGZyb20gJy4vaGFuZGxlcnMvcmVxdWVzdFBPU1QnO1xuXG5jb25zdCBmb3JtQ29tcG9uZW50ID0ge1xuICBpbml0ICgpIHtcbiAgICB0aGlzLmNhY2hlRE9NKCk7XG4gICAgdGhpcy5iaW5kRXZlbnRzKCk7XG4gICAgaW5pdCh0aGlzLnJlcXVpcmVkKTtcbiAgfSxcbiAgY2FjaGVET00gKCkge1xuICAgIHRoaXMuZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XG4gICAgdGhpcy5nZXREYXRhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdldC1kYXRhJyk7XG4gICAgdGhpcy5wb3N0RGF0YSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3N0LWRhdGEnKTtcbiAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUnKTtcbiAgICBjb25zdCBlbWFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlbWFpbCcpO1xuICAgIGNvbnN0IHBob25lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Bob25lJyk7XG4gICAgY29uc3QgYWRkcmVzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGRyZXNzJyk7XG4gICAgdGhpcy5yZXF1aXJlZCA9IFtcbiAgICAgIG5hbWUsIGVtYWlsLCBwaG9uZSwgYWRkcmVzc1xuICAgIF07XG4gIH0sXG4gIGJpbmRFdmVudHMgKCkge1xuICAgIC8vIHRlc3RGb3JFbGVtZW50IGZvdW5kIGluIGhhbmRsZXJzIGZvbGRlclxuICAgIHRlc3RGb3JFbGVtZW50KHRoaXMucG9zdERhdGEsICdjbGljaycsIHRoaXMuc2VuZERhdGEuYmluZCh0aGlzKSk7XG4gICAgdGVzdEZvckVsZW1lbnQodGhpcy5nZXREYXRhLCAnY2xpY2snLCB0aGlzLmhhbmRsZVJlbmRlci5iaW5kKHRoaXMpKTtcbiAgICB0ZXN0Rm9yRWxlbWVudCh0aGlzLmZvcm0sICdtb3VzZW92ZXInLCB0aGlzLmxpdmVWYWxpZGF0aW9uLmJpbmQodGhpcykpO1xuICAgIHRlc3RGb3JFbGVtZW50KHRoaXMuZm9ybSwgJ21vdXNlb3ZlcicsIHRoaXMucGxhY2Vob2xkZXJzVG9nZ2xlLmJpbmQodGhpcykpO1xuICB9LFxuICBoYW5kbGVSZW5kZXIgKCkge1xuICAgIGhhbmRsZUdFVC5yZW5kZXIoKTtcbiAgfSxcbiAgc2VuZERhdGEgKCkge1xuICAgIGhhbmRsZVBPU1Quc2VuZCgpO1xuICB9LFxuICBsaXZlVmFsaWRhdGlvbiAoZSkge1xuICAgIGlmIChlLnRhcmdldC50eXBlID09PSAncmFkaW8nKSB7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbGlkYXRlKHRoaXMucmVxdWlyZWQpO1xuICAgIH1cbiAgfSxcbiAgcGxhY2Vob2xkZXJzVG9nZ2xlIChlKSB7XG4gICAgdG9nZ2xlKHRoaXMucmVxdWlyZWQpO1xuICB9XG59XG5mb3JtQ29tcG9uZW50LmluaXQoKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2Zvcm1Db21wb25lbnQuanMiLCIvKlxuICBTZXQgaW5pdGlhbCBwbGFjZWhvbGRlcnMgZm9yIGlucHV0c1xuKi9cblxuaW1wb3J0IGZvcm1EYXRhIGZyb20gJy4uL2RhdGEvZm9ybS1kYXRhJztcblxuY29uc3QgcGxhY2Vob2xkZXJzID0gbW9kdWxlLmV4cG9ydHMgPSB7XG4gIC8vIHNldCBpbml0aWFsIGlucHV0IHBsYWNlaG9sZGVyIHZhbHVlc1xuICBpbml0IChyZXF1aXJlZCkge1xuICAgIHJlcXVpcmVkLm1hcCgoaW5wdXQsIGluZGV4KSA9PiB7XG4gICAgICBpZiAoaW5wdXQpIHtcbiAgICAgICAgaW5wdXQucGxhY2Vob2xkZXIgPSBmb3JtRGF0YS5kYXRhW2luZGV4XS5wbGFjZWhvbGRlcjtcbiAgICAgIH1cbiAgICB9LCB0aGlzKTtcbiAgfSxcbiAgdG9nZ2xlIChyZXF1aXJlZCkge1xuICAgIHJlcXVpcmVkLm1hcCgoaW5wdXQsIGluZGV4KSA9PiB7XG4gICAgICBpZiAoZXZlbnQudGFyZ2V0ICE9IGlucHV0KSB7XG4gICAgICAgIGlucHV0LnBsYWNlaG9sZGVyID0gZm9ybURhdGEuZGF0YVtpbmRleF0ucGxhY2Vob2xkZXI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyB0b2dnbGUgaW5wdXQgcGxhY2Vob2xkZXIgdmFsdWUgdG8gYmxhbmsgb25seSB3aGVuIHVzZXIgc2VsZWN0cyBpbnB1dFxuICAgICAgICBpbnB1dC5wbGFjZWhvbGRlciA9ICcnO1xuICAgICAgfVxuICAgIH0sIHRoaXMpO1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9oYW5kbGVycy9wbGFjZWhvbGRlcnMuanMiLCIvKlxuICBDcmVhdGVkIHRvIGF2b2lkIGVycm9ycyBpZiB0aGUgZWxlbWVudCBpcyBub3QgcHJlc2VudCBpbiB0aGUgRE9NXG4qL1xuXG5jb25zdCB0ZXN0ID0gbW9kdWxlLmV4cG9ydHMgPSB7XG4gIHRlc3RGb3JFbGVtZW50IChlbCwgZXZlbnRUeXBlLCBtZXRob2QpIHtcbiAgICBpZiAoZWwpIHtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBtZXRob2QpO1xuICAgIH1cbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvaGFuZGxlcnMvdGVzdEZvckVsZW1lbnQuanMiXSwic291cmNlUm9vdCI6IiJ9